@model IEnumerable<Projeto_Lunary.Models.Restaurante>
@{
    ViewBag.Title = "Pratos";
}
<head>
    <link href="~/Content/Menu/Menu.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="~/Scripts/Menu/FilterCate.js"></script>
</head>

<body>

    <h1 class="titulo">Lunary</h1>
    <p class="subtitulo">Cardápio</p>

    <div class="carrosel">
        <ul>
            <il>
                @foreach (var item in ViewBag.Rank)
                {
                    <img src="@item.imagem" alt="" height="250px" width="400px">

                    if (item.imagem != null)
                    {
                        var base64 = Convert.ToBase64String(item.PROIMAGEM);
                        var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                        <img src='@imgSrc' style="max-width:400px; max-height:250px;" />
                    }

                }


            </il>
        </ul>
    </div>



    <div class="barraVermelha">.</div>


    <p class="barra">Menu</p>



    <!-- Filtro Categorias -->
    <div class="botao btn-group">
        <div class="dropdown">
            <select style="text-transform: uppercase;" onchange="FiltroCategorias()" id="FiltroCategorias" class="btn btn-danger dropdown-toggle">

                @foreach (var item in ViewBag.ListCategorias)
                {
                    <option onchange="FiltroCategorias()" value="@item.RESTACATEGORIA">@item.RESTACATEGORIA</option>

                }
            </select>
        </div>
    </div>


    <!-- Pratos -->
    <div>
        @foreach (var item in Model)
        {
            <div class="row pratos @item.RESTACATEGORIA">
                <div class="col-lg-12">
                    <div data-toggle="modal" data-target="#PratosDetalhe-@item.RESTAUID" data-descricao="@item.RESTADESCRICAO">
                        <img class="img" src="~/Content/Menu/img/PratoExemplo.png" width="232" height="232">
                    </div>

                    <h3 class="text-center name">@item.RESTANOME</h3>

                    <!--Btn Coração-->
                    <div class="heart-btn">
                        <div class="content">
                            <form action="" method="post">
                                @*<button type="submit" class="heart btn" id="Heart-@item.RESTAUID"></button>*@
                                <span class="heart" id="@item.RESTAUID"></span>
                            </form>


                        </div>
                    </div>
                    <p class="preco">R$ @item.RESTAPRECO.ToString("F")</p>
                </div>
            </div>

            <!-- Modal Exibir/Detalhes-->
            <div class="modal fade" id="PratosDetalhe-@item.RESTAUID" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Prato Detalhes</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>


                        </div>
                        <div class="modal-body">

                            <div class="col-lg-12">
                                <img class="imgmodal" src="~/Content/Menu/img/PratoExemplo.png" width="232" height="232">
                                <h3 class="text-center name">@item.RESTANOME</h3>

                                <p> @item.RESTADESCRICAO</p>
                                <h3 class="text-center name">R$ @item.RESTAPRECO.ToString("F")</h3>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>


        }

    </div>

    <script>

        window.onload = () => {
            document.queryCommandIndeterm
            FiltroCategorias()
        }

        $(document).ready(function () {

            //Like
            $('.heart').click(function () {

                var id = (this.id);
                var url = "/Restaurante/ContagemLikes";
                var status;
                let el = document.getElementById(id);
                if (el.classList.contains('heart-active')) {
                    el.classList.remove('heart-active');
                    status = false;
                    $.post(url, { id: id, status: status }, function (data) {

                    });
                }
                else {
                    el.classList.add('heart-active');
                    status = true;
                    $.post(url, { id: id, status: status }, function (data) {

                    });
                }


            });

        });






    </script>
</body>




